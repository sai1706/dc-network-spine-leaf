! LEAF-3 Configuration
! Top-of-Rack Switch - Rack 3
!
hostname LEAF-3
!
! Loopback for BGP Router ID
interface Loopback0
  description BGP Router ID
  ip address 10.0.0.13/32
  no shutdown
!
! Uplinks to all 4 spines
interface Ethernet1/49
  description P2P to SPINE-1 Eth1/3
  no switchport
  mtu 9216
  ip address 10.1.1.5/31
  no shutdown
!
interface Ethernet1/50
  description P2P to SPINE-2 Eth1/3
  no switchport
  mtu 9216
  ip address 10.1.2.5/31
  no shutdown
!
interface Ethernet1/51
  description P2P to SPINE-3 Eth1/3
  no switchport
  mtu 9216
  ip address 10.1.3.5/31
  no shutdown
!
interface Ethernet1/52
  description P2P to SPINE-4 Eth1/3
  no switchport
  mtu 9216
  ip address 10.1.4.5/31
  no shutdown
!
! Server-facing port example
interface Ethernet1/1
  description Server-01
  switchport mode access
  switchport access vlan 300
  spanning-tree port type edge
  no shutdown
!
! Server VLAN Gateway
interface Vlan300
  description Server Subnet - Rack 3
  ip address 10.10.3.1/24
  no shutdown
!
! BGP Configuration
router bgp 65013
  router-id 10.0.0.13
  log-neighbor-changes
  maximum-paths 4
  !
  ! Advertise server subnet
  network 10.10.3.0/24
  !
  ! Neighbors to all 4 spines
  neighbor 10.1.1.4 remote-as 65001
  neighbor 10.1.1.4 description SPINE-1
  !
  neighbor 10.1.2.4 remote-as 65002
  neighbor 10.1.2.4 description SPINE-2
  !
  neighbor 10.1.3.4 remote-as 65003
  neighbor 10.1.3.4 description SPINE-3
  !
  neighbor 10.1.4.4 remote-as 65004
  neighbor 10.1.4.4 description SPINE-4
!
end
